@{
    ViewData["Title"] = "Home";
}

<div class="container col-xxl-8 px-4 py-5">
    <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
        <div class="col-10 col-sm-8 col-lg-6">
            <img src="~/images/screenshot.png"
                 class="d-block mx-lg-auto img-fluid rounded"
                 alt="Music tool screenshot" width="800" loading="lazy">
            <p class="text-center text-muted small mt-2">
                @Localizer["Tool Interface Preview"]
            </p>
        </div>
        <div class="col-lg-6">
            <h1 class="display-5 fw-bold text-body-emphasis lh-1 mb-3">
                @Localizer["'See' the Language of Music"]
            </h1>
            <p class="lead">
                @Localizer["Welcome to the interactive music theory tool. We help you connect the abstract concepts of music theory—the Chromatic Scale, the Circle of Fifths, and the piano keyboard—allowing you to truly 'see' how music works."]
            </p>
            <hr class="my-4">
            <p class="text-muted">
                @Localizer["Whether you are a beginner student, a curious enthusiast, or an experienced producer, this tool will provide an intuitive sandbox for exploring keys, harmony, and scale structures."]
            </p>

            <div class="d-grid gap-3 d-md-flex justify-content-md-start mt-4">
                <a asp-controller="Home" asp-action="Major"
                   class="btn btn-primary btn-lg px-4 me-md-2 d-flex align-items-center justify-content-center">
                    @Localizer["Explore Major"]
                </a>
                <a asp-controller="Home" asp-action="Minor"
                   class="btn btn-outline-secondary btn-lg px-4 d-flex align-items-center justify-content-center">
                    @Localizer["Explore Minor"]
                </a>
            </div>
        </div>
    </div>
</div>


<div class="container-fluid px-4 py-5" id="interactive-piano-section">
    <div class="row justify-content-center">
        <div class="col-lg-12">
            <div id="homepage-piano-container" class="piano-container table-responsive">
            </div>
        </div>
    </div>
</div>
<hr class="feature-divider">


<div class="container px-4 py-5" id="features">
    <h2 class="pb-2 border-bottom">@Localizer["Why is music designed this way?"]</h2>
    </div>


@* ReSharper disable once Razor.SectionNotResolved *@
@section scripts {
    <script src="~/scripts/Piano.js" asp-append-version="true"></script>
    <script>
        window.addEventListener('load', () => {

            const pianoEl = document.getElementById('homepage-piano-container');

            if (typeof Piano !== 'undefined') {
                // 初始化我们的新钢琴控件！
                new Piano(pianoEl, {
                    octaves: 4,         // 3 个八度 (足够“宽”)
                    startOctave: 4,     // 从 C3 开始 (一个很好的中间范围)
                    isClickable: true,  // [!! 关键 !!] 允许点击和发声
                    showNoteNames: true,
                    showTonicIndicator: false // 主页上不需要这个
                });
            } else {
                console.error("Piano.js 未加载。");
            }
        });
    </script>
}

@* ReSharper disable once Razor.SectionNotResolved *@
@section styles {
    <link rel="stylesheet" href="~/styles/site.css" asp-append-version="true"/>
}
